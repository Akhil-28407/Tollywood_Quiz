<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Leaderboard | Telugu Cinema</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script defer src="{{ url_for('static', filename='quiz.js') }}"></script>
</head>
<body class="page page-leaderboard">
  <header class="site-header">
    <h1>Leaderboard</h1>
    <p class="subtitle">Top scores (shared across players)</p>
  </header>

  <main class="main-vertical">
    <div class="card">
      <table class="leaderboard-table" aria-live="polite">
        <thead>
          <tr><th>#</th><th>Name</th><th>Score</th><th>Mode</th></tr>
        </thead>
        <tbody id="leaderboard-body" {% if entries %}data-server="true"{% endif %}>
          {% if entries and entries|length > 0 %}
            {% for row in entries %}
              <tr>
                <td>{{ loop.index }}</td>
                <td>{{ row.name|e }}</td>
                <td>{{ row.score }}</td>
                <td>{{ row.difficulty|e }}</td>
              </tr>
            {% endfor %}
          {% else %}
            <tr><td colspan="4" style="color:var(--muted)">No scores yet. Play a quiz to add your score.</td></tr>
          {% endif %}
        </tbody>
      </table>

      <div class="action-row">
        <button id="clear-server" class="btn">Clear</button>
        <button class="btn btn-ghost" onclick="location.href='/'">Home</button>
      </div>
    </div>
  </main>

  <script>
    // clear server leaderboard (development convenience)
    document.addEventListener('DOMContentLoaded', function () {
      var btn = document.getElementById('clear-server');
      if (!btn) return;
      btn.addEventListener('click', function () {
        if (!confirm('Clear the shared leaderboard? This removes all entries.')) return;
        fetch('/clear_leaderboard', { method: 'POST' }).then(function (r) {
          if (r.ok) location.reload(); else alert('Failed to clear leaderboard');
        }).catch(function () { alert('Network error'); });
      });
    });
  </script>

  <footer class="site-footer">
    Designed by <a href="https://github.com/Akhil-28407" target="_blank" rel="noreferrer">@Akhil-28407</a>
  </footer>
</body>
</html>
